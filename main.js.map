{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/offline-plugin/runtime.js","webpack:///./src/util.js","webpack:///./src/storage.js","webpack:///./src/paperTexture.js","webpack:///./src/brush.js","webpack:///./src/linebrush.js","webpack:///./src/splatbrush.js","webpack:///./src/dripbrush.js","webpack:///./src/eraserbrush.js","webpack:///./src/brushmanager.js","webpack:///./src/resize.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","hasSW","navigator","window","location","protocol","hostname","indexOf","install","options","serviceWorker","register","applyUpdate","callback","errback","update","getRegistration","then","registration","on","node","eventNames","handler","split","forEach","eventName","addEventListener","getCoordsfromEvent","event","target","getBoundingClientRect","left","top","ev","touches","x","clientX","y","clientY","rand","min","max","isNaN","Math","random","store","localStorage","setItem","storeJson","JSON","stringify","load","getItem","loadJson","parse","drawCircle","context","canvas","width","height","beginPath","arc","PI","fill","drawWrapCircle","xOffset","yOffset","generatePoints","num","size","Array","from","length","createTexture","restore","can","document","createElement","ctx","getContext","fillStyle","fillRect","globalAlpha","hue","floor","points","createPattern","Brush","this","isDrawing","lastX","lastY","newSize","newColor","color","coords","draw","doDraw","LineBrush","oldX","oldY","newX","newY","strokeStyle","lineWidth","lineCap","moveTo","lineTo","stroke","SplatBrush","angle","dist","rad","cos","sin","DripBrush","animateDrip","centerX","centerY","dripSize","speed","damp","sizeDiff","loop","requestAnimationFrame","EraserBrush","oldFill","createItem","className","container","onClick","item","appendChild","BrushManager","colors","brushes","sizes","eraser","colorContainer","brushContainer","sizeContainer","menuButton","setBackground","setFill","startDraw","currentBrush","stopDraw","map","brushClass","previousBrush","setColor","setSize","setBrush","innerHTML","getImage","style","backgroundColor","brush","sizeItem","updateButton","deg2Quart","rot","getQuarterTurns","orientation","screen","OfflinePluginRuntime","drawingBoard","querySelector","menu","clearButton","saveButton","test","userAgent","display","checkRotation","console","log","newRotation","changeRotation","currentRotation","rotate","quarterTurns","aspectChange","newWidth","newHeight","offCan","offCtx","drawImage","drawingContext","getElementById","clear","paperPattern","innerWidth","innerHeight","e","classList","remove","preventDefault","toDataURL","toggle","href","download","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","join","loadedImage","img","Image","onload","src"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","var appCacheIframe;\n\nfunction hasSW() {\n  \n    return 'serviceWorker' in navigator && (\n      window.location.protocol === 'https:' ||\n      window.location.hostname === 'localhost' ||\n      window.location.hostname.indexOf('127.') === 0\n    );\n  \n}\n\nfunction install(options) {\n  options || (options = {});\n\n  \n    if (hasSW()) {\n      var registration = navigator.serviceWorker\n        .register(\n          \"sw.js\", {\n            \n            \n          }\n        );\n\n      \n\n      return;\n    }\n  \n\n  \n}\n\nfunction applyUpdate(callback, errback) {\n  \n\n  \n}\n\nfunction update() {\n  \n    if (hasSW()) {\n      navigator.serviceWorker.getRegistration().then(function(registration) {\n        if (!registration) return;\n        return registration.update();\n      });\n    }\n  \n\n  \n}\n\n\n\nexports.install = install;\nexports.applyUpdate = applyUpdate;\nexports.update = update;\n","export const on = (node, eventNames, handler) =>\n  eventNames.split(' ').forEach(eventName => node.addEventListener(eventName, handler))\n\nexport const getCoordsfromEvent = event => {\n  const { left, top } = event.target.getBoundingClientRect();\n  const ev = event.touches ? event.touches[0] : event;\n\n  return {\n    x: ev.clientX - left,\n    y: ev.clientY - top,\n  }\n}\n\nexport const getTime = () => {\n  const d = new Date();\n  return [\n    d.getFullYear(),\n    d.getMonth() + 1,\n    d.getDate(),\n    d.getHours(),\n    d.getMinutes(),\n    d.getSeconds()\n  ].join('-');\n}\n\nexport const rand = (min = 1, max) => isNaN(max) ? Math.random() * min : Math.random() * (max - min) + min;\n","export const store = (key, value) => localStorage.setItem(key, value);\nexport const storeJson = (key, value) => store(key, JSON.stringify(value));\n\nexport const load = name => localStorage.getItem(name);\nexport const loadJson = name => {\n  try {\n    return JSON.parse(load(name));\n  } catch {\n    return null;\n  }\n};\n","import { loadJson, storeJson } from './storage';\n\nconst drawCircle = (context, x, y, r) => {\n  const { width, height } = context.canvas;\n  context.beginPath();\n  context.arc(x * width, y * height, r, 0, Math.PI * 2);\n  context.fill();\n};\n\nconst drawWrapCircle = (context, x, y, r) => {\n  for (let xOffset = -1; xOffset <= 1; xOffset++) {\n    for (let yOffset = -1; yOffset <= 1; yOffset++) {\n      drawCircle(context, x + xOffset, y + yOffset, r);\n    }\n  }\n};\n\nconst generatePoints = (num, size) =>\n  Array.from({ length: num }, () => ({\n    x: Math.random(),\n    y: Math.random(),\n    r: Math.random() ** 2 * (size / 4),\n  }));\n\nexport function createTexture(size = 1024, restore) {\n  const can = document.createElement('canvas');\n  can.width = can.height = size;\n  const ctx = can.getContext('2d');\n\n  ctx.fillStyle = '#fff';\n  ctx.fillRect(0, 0, size, size);\n  ctx.globalAlpha = 0.01;\n\n  const hue = (restore && loadJson('textureHue')) || Math.floor(Math.random() * 360);\n  ctx.fillStyle = `hsl(${hue}, 100%, 80%)`;\n  storeJson('textureHue', hue);\n  \n  const points = (restore && loadJson('texturePoints')) || generatePoints(150, size);\n  points.forEach(({ x, y, r }) => drawWrapCircle(ctx, x, y, r));\n  storeJson('texturePoints', points);\n\n  return ctx.createPattern(can, 'repeat');\n}\n","export class Brush {\n  static size = 20\n  static color = '#000'\n\n  static setSize(newSize) {\n    Brush.size = newSize;\n  }\n\n  static setColor(newColor) {\n    Brush.color = newColor;\n  }\n\n  constructor(ctx) {\n    this.ctx = ctx;\n    this.isDrawing = false;\n    this.lastX = 0;\n    this.lastY = 0;\n  }\n\n  startDraw(coords) {\n    this.lastX = coords.x;\n    this.lastY = coords.y;\n    this.isDrawing = true;\n    this.draw(coords);\n  }\n\n  stopDraw() {\n    this.isDrawing = false;\n  }\n\n  draw(coords) {\n    const size = 20;\n    if (!this.isDrawing) return;\n    this.doDraw(this.lastX, this.lastY, coords.x, coords.y)\n    this.lastX = coords.x;\n    this.lastY = coords.y;\n  }\n\n  doDraw() { }\n  getImage() {\n    return 'brush';\n  }\n}\n","import {Brush} from './brush.js';\n\nexport class LineBrush extends Brush {\n  doDraw(oldX, oldY, newX, newY) {\n    if (oldX === newX && oldY === newY) {\n      newX += .1;\n    }\n    this.ctx.strokeStyle = Brush.color;\n    this.ctx.lineWidth = Brush.size;\n    this.ctx.lineCap = 'round';\n    this.ctx.beginPath();\n    this.ctx.moveTo(oldX, oldY);\n    this.ctx.lineTo(newX, newY);\n    this.ctx.stroke();\n  }\n\n  getImage(size = 32, color = \"#301\") {\n    return `\n      <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 32 32\">\n        <circle fill=\"${color}\" cx=\"16\" cy=\"16\" r=\"16\"/>\n      </svg>\n    `\n  }\n}\n","import {Brush} from './brush';\nimport { rand } from './util';\n\nexport class SplatBrush extends Brush {\n  doDraw(oldX, oldY, newX, newY) {\n    this.ctx.fillStyle = Brush.color;\n    for (let i = 0; i < 16; i++) {\n      const angle = rand(Math.PI * 2);\n      const dist = rand(Brush.size);\n      const rad = rand(Brush.size / (2 + dist / 4));\n      const x = newX + Math.cos(angle) * dist;\n      const y = newY + Math.sin(angle) * dist;\n      this.ctx.beginPath();\n      this.ctx.arc(x, y, rad, 0, Math.PI * 2);\n      this.ctx.fill();\n    }\n  }\n\n  getImage(size = 32, color = \"#301\") {\n    return `\n      <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 32 32\">\n        <path fill=\"${color}\" d=\"M8.3 14A4 4 0 1 1 12 7.3V7a7 7 0 1 1 13.1 3.4A5 5 0 0 1 32 15a5 5 0 0 1-8.4 3.6 8 8 0 0 1-11.9 4.2A6 6 0 1 1 8 15.4l.3-1.5zM22 32a4 4 0 1 1 0-8 4 4 0 0 1 0 8z\"/>\n      </svg>\n    `\n  }\n}\n","import { LineBrush } from './linebrush';\nimport { rand } from './util';\n\nexport class DripBrush extends LineBrush {\n  doDraw(oldX, oldY, newX, newY) {\n    super.doDraw(oldX, oldY, newX, newY);\n    const dX = oldX - newX;\n    const dY = oldY - newY;\n    const dist = dX * dX + dY * dY;\n    this.animateDrip(newX, newY);\n  }\n\n  getImage(size = 32, color = '#301') {\n    return `\n      <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 32 32\">\n        <path fill=\"${color}\" d=\"M25 19.524V28.5a3.5 3.5 0 0 1-7 0v-7.449l-1 .211V22.5a4.5 4.5 0 1 1-9 0v-.216c-3.78-.794-6.923-3.718-7.778-7.708-1.157-5.402 2.32-10.712 7.765-11.86L19.821.22c5.446-1.149 10.799 2.3 11.957 7.702 1.086 5.068-1.907 10.055-6.778 11.6z\" />\n      </svg>\n    `;\n  }\n\n  animateDrip(centerX, centerY) {\n    if (rand() > 0.3) return;\n    const size = LineBrush.size;\n    const scale = rand(0.2, 0.4);\n    const dripSize = scale * size;\n    let speed = rand(0.3, 0.7);\n    const damp = rand(0.975, 0.995);\n    const color = LineBrush.color;\n    const sizeDiff = size - dripSize;\n    const x = centerX + rand(sizeDiff) - sizeDiff / 2;\n    let y = centerY;\n    const loop = () => {\n      y += speed;\n      speed *= damp;\n      if (speed > 0.1) {\n        requestAnimationFrame(loop);\n      }\n      this.ctx.fillStyle = color;\n      this.ctx.beginPath();\n      this.ctx.arc(x, y, dripSize / 2, 0, Math.PI * 2);\n      this.ctx.fill();\n    };\n    loop();\n  }\n}\n","import {Brush} from './brush';\n\nexport class EraserBrush extends Brush {\n  constructor(context) {\n    super(context);\n    this.fill = '#fff';\n  }\n\n  setFill(fill) {\n    this.fill = fill;\n  }\n\n  doDraw(oldX, oldY, newX, newY) {\n    const oldFill = this.ctx.fillStyle;\n    const size = Brush.size;\n    this.ctx.fillStyle = this.fill;\n    this.ctx.beginPath();\n    this.ctx.arc(newX - size / 2, newY - size / 2, size, 0, Math.PI * 2);\n    this.ctx.fill();\n    this.ctx.fillStyle = oldFill;\n  }\n\n  getImage(color) {\n    color = color ? '#fff' : '#301';\n    return `\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\">\n        <g fill=\"none\" fill-rule=\"evenodd\">\n          <path fill=\"${color}\" fill-rule=\"nonzero\" d=\"M17.5 4.23l-7.4 7.4 10.24 10.22 7.39-7.39c1-1 1-2.7 0-3.7l-6.54-6.53c-1-1-2.7-1-3.7 0z\"/>\n          <path stroke=\"${color}\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-width=\"4\" d=\"M14.8 27.68L27.86 14.6c1-1 1-2.7 0-3.7l-6.54-6.54c-1-1-2.7-1-3.7 0L3.86 18.16c-1 1-1 2.7 0 3.7l5.83 5.82H30\"/>\n        </g>\n      </svg>\n    `;\n  }\n}\n","import { on } from './util';\nimport { Brush } from './brush';\nimport { loadJson, storeJson } from './storage';\n\nfunction createItem(className, container, onClick) {\n  const item = document.createElement('div');\n  item.className = className;\n  on(item, 'click', onClick);\n  container.appendChild(item);\n  return item;\n}\n\nexport class BrushManager {\n  constructor({ colors, brushes, sizes, context, eraser, colorContainer, brushContainer, sizeContainer, menuButton }) {\n    this.brushes = brushes.map(brushClass => new brushClass(context));\n    this.eraser = new eraser(context);\n    this.menuButton = menuButton;\n\n    this.currentBrush = this.brushes[loadJson('brushNumber')] || this.brushes[0];\n    this.previousBrush = this.currentBrush;\n    Brush.setColor(loadJson('brushColor') || colors[1]);\n    Brush.setSize(loadJson('brushSize') || sizes[1]);\n\n    const eraserItem = createItem('brushpicker eraser', brushContainer, () => this.setBrush(this.eraser));\n    eraserItem.innerHTML = this.eraser.getImage();\n\n    colors.forEach(color => {\n      const colorItem = createItem('colorpicker', colorContainer, () => this.setColor(color));\n      colorItem.style.backgroundColor = color;\n    });\n\n    this.brushes.forEach(brush => {\n      const brushItem = createItem('brushpicker', brushContainer, () => this.setBrush(brush));\n      brushItem.innerHTML = brush.getImage();\n    });\n\n    sizes.forEach(size => {\n      const sizeItem = createItem('sizepicker', sizeContainer, () => this.setSize(size));\n      sizeItem.style.width = sizeItem.style.height = `${size}px`;\n    });\n\n    this.updateButton();\n  }\n\n  setBackground = fill => this.eraser.setFill(fill);\n\n  setBrush(brush) {\n    if (brush !== this.eraser) {\n      this.previousBrush = brush;\n    }\n    this.currentBrush = brush;\n    storeJson('brushNumber', this.brushes.indexOf(brush));\n    this.updateButton();\n  }\n\n  setSize(size) {\n    Brush.setSize(size);\n    this.currentBrush = this.previousBrush;\n    storeJson('brushSize', size);\n    this.updateButton();\n  }\n\n  setColor(color) {\n    Brush.setColor(color);\n    this.currentBrush = this.previousBrush;\n    storeJson('brushColor', color);\n    this.updateButton();\n  }\n\n  updateButton() {\n    const size = Math.min(32, Math.max(8, Brush.size));\n    this.menuButton.innerHTML = this.currentBrush.getImage(size, Brush.color);\n  }\n\n  startDraw = coords => this.currentBrush.startDraw(coords);\n  draw = coords => this.currentBrush.draw(coords);\n  stopDraw = () => this.currentBrush.stopDraw();\n}\n","const deg2Quart = rot => (rot / 90 + 4) % 4;\n\nconst getQuarterTurns = () => {\n  if ('orientation' in window) {\n    return deg2Quart(window.orientation);\n  }\n  if ('orientation' in window.screen) {\n    return deg2Quart(window.screen.orientation.angle);\n  }\n  return window.screen.width > window.screen.height ? 1 : 0;\n};\n\nexport class ResizeRotator {\n  constructor(canvas) {\n    this.currentRotation = getQuarterTurns();\n    this.canvas = canvas;\n    window.addEventListener('orientationchange', this.checkRotation);\n    window.addEventListener('resize', this.checkRotation);\n  }\n  checkRotation = () => {\n    console.log('checkRotation');\n    const newRotation = getQuarterTurns();\n    const changeRotation = (this.currentRotation - newRotation + 4) % 4;\n    this.currentRotation = newRotation;\n    console.log(changeRotation);\n    if (changeRotation) {\n      this.rotate(changeRotation);\n    }\n  };\n  rotate = quarterTurns => {\n    const aspectChange = !!quarterTurns % 2;\n    const width = this.canvas.width;\n    const height = this.canvas.height;\n    const newWidth = aspectChange ? height : width;\n    const newHeight = aspectChange ? width : height;\n    const offCan = document.createElement('canvas');\n    const offCtx = offCan.getContext('2d');\n    offCan.width = newWidth;\n    offCan.height = newHeight;\n    offCtx.rotate((Math.PI / 2) * quarterTurns);\n    offCtx.drawImage(this.canvas, quarterTurns > 1 ? -width : 0, quarterTurns < 3 ? -height : 0);\n    this.canvas.width = newWidth;\n    this.canvas.height = newHeight;\n    const context = this.canvas.getContext('2d');\n    context.drawImage(offCan, 0, 0);\n  };\n}\n","// Import stylesheets\nimport './style.scss';\nimport { on, getCoordsfromEvent, getTime } from './util';\nimport { createTexture } from './paperTexture';\nimport { load, store } from './storage';\nimport {LineBrush} from './linebrush';\nimport {SplatBrush} from './splatbrush';\nimport {DripBrush} from './dripbrush';\nimport {EraserBrush} from './eraserbrush';\nimport { BrushManager } from './brushmanager';\nimport {ResizeRotator} from './resize';\nimport * as OfflinePluginRuntime from 'offline-plugin/runtime';\n\nOfflinePluginRuntime.install();\n\nconst drawingBoard = document.querySelector('#drawingboard');\nconst menu = document.querySelector('#menu');\nconst menuButton = document.querySelector('#menubutton');\nconst clearButton = document.querySelector('#clear');\nconst saveButton = document.querySelector('#save');\n\nconst isIos = /iP(hone|ad|od)/.test(navigator.userAgent);\nif (isIos) {\n  saveButton.style.display = 'none';\n}\n\nnew ResizeRotator(drawingBoard);\n\nconst drawingContext = drawingBoard.getContext('2d');\n\nconst brush = new BrushManager({\n  context: drawingContext,\n  eraser: EraserBrush,\n  colors: [\n    'hsl(50, 100%, 99%)',\n    'hsl(48, 100%, 50%)',\n    'hsl(84, 82%, 35%)',\n    'hsl(216, 100%, 52%)',\n    'hsl(278, 93%, 40%)',\n    'hsl(353, 73%, 50%)',\n    'hsl(90, 73%, 5%)',\n  ],\n  sizes: [40, 20, 10],\n  brushes: [LineBrush, SplatBrush, DripBrush],\n  colorContainer: document.getElementById('colorcontainer'),\n  sizeContainer: document.getElementById('sizecontainer'),\n  brushContainer: document.getElementById('brushcontainer'),\n  menuButton: document.getElementById('menubutton'),\n});\n\ndrawingBoard.width = window.innerWidth;\ndrawingBoard.height = window.innerHeight;\n\non(drawingBoard, 'mousedown touchstart', startDraw);\non(drawingBoard, 'mousemove touchmove', draw);\non(drawingBoard, 'mouseup mouseleave touchend touchleave', stopDraw);\non(menuButton, 'click', () => menu.classList.toggle('active'));\non(clearButton, 'click', () => clear());\non(saveButton, 'click', save);\n\nfunction clear(restore = false) {\n  const paperPattern = createTexture(1024, restore);\n  brush.setBackground(paperPattern);\n  drawingContext.fillStyle = paperPattern;\n  drawingContext.fillRect(0, 0, drawingBoard.width, drawingBoard.height);\n}\n\nfunction save() {\n  saveButton.href = drawingBoard.toDataURL();\n  saveButton.download = `doodle-${getTime()}.png`;\n}\n\nfunction startDraw(e) {\n  const coords = getCoordsfromEvent(e);\n  brush.startDraw(coords);\n  menu.classList.remove('active');\n  e.preventDefault();\n}\n\nfunction stopDraw(e) {\n  brush.stopDraw();\n  store('image', drawingBoard.toDataURL());\n  e.preventDefault();\n}\n\nfunction draw(e) {\n  const coords = getCoordsfromEvent(e);\n  brush.draw(coords);\n  e.preventDefault();\n}\n\nclear(true);\nconst loadedImage = load('image');\nif (loadedImage) {\n  const img = new Image();\n  img.onload = () => drawingContext.drawImage(img, 0, 0);\n  img.src = loadedImage;\n}\n"],"sourceRoot":""}